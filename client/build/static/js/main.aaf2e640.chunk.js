(this["webpackJsonpreact-closet-app"]=this["webpackJsonpreact-closet-app"]||[]).push([[0],{107:function(e,t,a){e.exports=a(265)},129:function(e,t,a){},130:function(e,t,a){},135:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){},265:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(39),s=a.n(o),c=a(3),r=a(4),i=a(8),m=a(18),u=a(7),d=a.n(u),p=function(){return d.a.get("/api/closet")},h=function(e){return d.a.get("/api/closet/"+e)},E=function(e){return d.a.delete("/api/closet/"+e)},g=function(e){return d.a.post("/api/closet",e)};function b({children:e}){return l.a.createElement("div",{className:"container"},e)}function v({children:e}){return l.a.createElement("div",{className:"row"},e)}function f({size:e,children:t}){return l.a.createElement("div",{className:"col "+e},t)}a(129);function N({src:e,children:t}){return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:e,alt:"clothing item"})),t)}function y({children:e}){return l.a.createElement("div",{className:"card-content"},e)}a(130);function O({props:e,children:t}){return l.a.createElement("a",Object.assign({className:"btn orange lighten-3 "},e),t)}function P(e){return l.a.createElement("a",Object.assign({className:"btn delete-btn"},e),"Remove from Closet")}a(72);var C=function(){const e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)({}),r=Object(m.a)(s,2);function i(){p().then(e=>o(e.data)).catch(e=>console.log(e))}return r[0],r[1],Object(n.useEffect)(()=>{i()},[]),l.a.createElement("section",{className:"mainSection"},l.a.createElement(b,null,l.a.createElement(v,null,l.a.createElement(f,{size:"m2"},l.a.createElement(O,null,"Sort"),l.a.createElement(O,null,"Filter")),l.a.createElement(f,{size:"m10"},l.a.createElement(v,null,l.a.createElement(f,{size:"s12"},l.a.createElement("br",null),l.a.createElement(v,null,a.length?a.map(e=>l.a.createElement(f,{key:e._id,size:"s6 m4"},l.a.createElement(N,{src:e.source},l.a.createElement(y,null,l.a.createElement(c.b,{to:"/closet/"+e._id},l.a.createElement("strong",null,e.brand," ",e.clothingType)))))):l.a.createElement("h3",null,"No Results to Display"))))))))};function x(e){return l.a.createElement("div",{className:"input-field"},l.a.createElement("input",e))}function U(e){return l.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:10},className:"btn waves-effect waves-light",type:"submit",name:"action"}),e.children,l.a.createElement("i",{className:"material-icons right"},"send"))}a(135);var S=a(29),T=a(15);var w=(e=[],t)=>{switch(t.type){case"PHOTOS_FETCHED":return[...t.photos];case"PHOTOS_UPLOADED":return[...t.photos,...e];case"DELETE_UPLOADED_PHOTO":return e.filter(e=>e.public_id!==t.publicId);default:return[...e]}};var _=(e=[],t)=>{switch(t.type){case"UPDATE_UPLOADED_PHOTO":{let a=-1;const n=e.map((e,n)=>e.id===t.uploadedPhoto.id?(a=n,Object(i.a)(Object(i.a)({},e),t.uploadedPhoto)):e);return-1!==a?n:[t.uploadedPhoto,...e]}case"DELETE_UPLOADED_PHOTO":{const a=e.findIndex(e=>e.response.body.public_id===t.publicId);return[...e.slice(0,a),...e.slice(a+1)]}default:return[...e]}},D="emilyah",k="km0b5awm",I=a(6);const j=e=>({type:"PHOTOS_UPLOADED",photos:e});var z=a(2);const L=(e,t)=>{try{const a=z.Util.withSnakeCaseKeys(t);return z.Cloudinary.new().url(e,a)}catch(a){return console.error(a),null}};class A extends n.Component{constructor(e){super(e),this.state={showMore:!1}}render(){const e=Object(i.a)(Object(i.a)({},this.context),this.props),t=L(e.publicId,e);return l.a.createElement("div",{className:"photo"},this.props.context&&l.a.createElement("h2",null,this.props.context.custom.photo),l.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},l.a.createElement(I.b,{publicId:this.props.publicId,className:"thumbnail inline",width:"250",height:"300",crop:"fit",quality:"80"},l.a.createElement(I.c,{quality:"auto",fetchFormat:"auto"}))))}}A.contextType=I.a.contextType;var H=A;class M extends n.Component{render(){return l.a.createElement("div",{className:"photoList"},l.a.createElement("div",{className:"actions"},l.a.createElement("a",{className:"upload_link",onClick:this.uploadImageWithCloudinary.bind(this)},"Upload Image")),l.a.createElement("div",{className:"photos"},0===this.props.photos.length&&l.a.createElement("p",null,"No photos were added yet."),this.props.photos.map(e=>l.a.createElement("div",null,l.a.createElement(H,{key:e.public_id,publicId:e.public_id}),l.a.createElement("p",null,"https://res.cloudinary.com/emilyah/image/upload/"+e.public_id)))))}uploadImageWithCloudinary(){const e=Object(i.a)({tags:["myphotoalbum"]},this.context);var t,a;console.log(e),t=e,a=(e,t)=>{if(e)console.log(e);else{const e=t.event,a=t.info;"success"===e&&this.props.onPhotosUploaded([a])}},window.cloudinary.openUploadWidget(t,a)}}M.contextType=I.a.contextType;var F=Object(T.b)(e=>({photos:e.photos}),{onPhotosUploaded:j})(M),B=a(104),R=a(40),q=a.n(R),J=a(106);class W extends n.Component{render(){const e=this.props.uploadedPhoto,t=e.response,a=t&&t.body,n=Math.floor(e.progress.percent);return l.a.createElement("div",null,l.a.createElement("h3",null,e.fileName),a&&a.delete_token&&l.a.createElement("button",{className:"delete-image",onClick:this.deletePhoto.bind(this)},"Delete image"),l.a.createElement("div",{className:"status"},!t&&l.a.createElement("div",null,"Uploading... ",n,"%"),!t&&l.a.createElement("div",null,"In progress"),t&&l.a.createElement("div",{className:"status-code"},"Upload completed with status code ",t.status)),l.a.createElement("div",{className:"progress-bar"},l.a.createElement("div",{className:"progress",role:"progressbar",style:{width:n+"%"}})),a&&l.a.createElement("div",{className:"info"},l.a.createElement("table",null,l.a.createElement("tbody",null,Object.keys(a).map(e=>l.a.createElement("tr",{key:e},l.a.createElement("td",null,e),l.a.createElement("td",null,JSON.stringify(a[e]))))))))}deletePhoto(){q.a.post("https://api.cloudinary.com/v1_1/".concat(this.context.cloudName,"/delete_by_token")).set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").send({token:this.props.uploadedPhoto.response.body.delete_token}).then(this.onDeletePhoto.bind(this))}onDeletePhoto(){this.props.onDeleteUploadedPhoto(this.props.uploadedPhoto.response.body.public_id)}}W.contextType=I.a.contextType;var G=Object(T.b)(e=>e,{onDeleteUploadedPhoto:e=>({type:"DELETE_UPLOADED_PHOTO",publicId:e})})(W);class X extends n.Component{constructor(e,t){super(e,t),this.state={uploadedPhotos:[]},this.photoId=1}render(){return l.a.createElement("div",null,l.a.createElement(J.a,{id:"direct-upload-dropzone",disableClick:!0,multiple:!1,accept:"image/*",style:{position:"relative"},onDrop:this.onPhotoSelected.bind(this)},l.a.createElement("div",{id:"direct_upload"},l.a.createElement("h1",null,"New Photo"),l.a.createElement("h2",null,"Direct upload from the browser with React File Upload"),l.a.createElement("p",null,"You can also drag and drop an image file into the dashed area."),l.a.createElement("form",null,l.a.createElement("div",{className:"form_line"},l.a.createElement("label",{path:"title"},"Title:"),l.a.createElement("div",{className:"form_controls"},l.a.createElement("input",{type:"text",ref:e=>this.titleEl=e,className:"form-control",placeholder:"Title"}))),l.a.createElement("div",{className:"form_line"},l.a.createElement("label",null,"Image:"),l.a.createElement("div",{className:"form_controls"},l.a.createElement("div",{className:"upload_button_holder"},l.a.createElement("label",{className:"upload_button",htmlFor:"fileupload"},"Upload"),l.a.createElement("input",{type:"file",id:"fileupload",accept:"image/*",multiple:"multiple",ref:e=>this.fileInputEl=e,onChange:()=>this.onPhotoSelected(this.fileInputEl.files)}))))),l.a.createElement("h2",null,"Status")),this.props.uploadedPhotos.map((e,t)=>l.a.createElement(G,{key:t,uploadedPhoto:e}))),l.a.createElement(c.c,{className:"back_link",exact:!0,to:"/photos"},"Back to list"))}onPhotoSelected(e){const t="https://api.cloudinary.com/v1_1/".concat(this.context.cloudName,"/upload"),a=this.titleEl.value;var n,l=Object(B.a)(e);try{for(l.s();!(n=l.n()).done;){let e=n.value;const l=this.photoId++,o=e.name;q.a.post(t).field("upload_preset",this.context.uploadPreset).field("file",e).field("multiple",!0).field("tags",a?"myphotoalbum,".concat(a):"myphotoalbum").field("context",a?"photo=".concat(a):"").on("progress",t=>this.onPhotoUploadProgress(l,e.name,t)).end((e,t)=>{this.onPhotoUploaded(l,o,t)})}}catch(o){l.e(o)}finally{l.f()}}onPhotoUploadProgress(e,t,a){this.props.onUpdateUploadedPhoto({id:e,fileName:t,progress:a})}onPhotoUploaded(e,t,a){this.props.onUpdateUploadedPhoto({id:e,fileName:t,response:a}),this.props.onPhotosUploaded([a.body])}}X.contextType=I.a.contextType;var K=Object(T.b)(e=>e,{onUpdateUploadedPhoto:e=>({type:"UPDATE_UPLOADED_PHOTO",uploadedPhoto:e}),onPhotosUploaded:j})(X);class Y extends n.Component{componentDidMount(){(e=>{const t={cloudName:e,format:"json",type:"list",version:Math.ceil((new Date).getTime()/1e3)},a=L("myphotoalbum",t);return fetch(a).then(e=>e.text()).then(e=>e?JSON.parse(e).resources:[])})(this.props.cloudName).then(this.props.onPhotosFetched)}render(){return l.a.createElement(I.a,{cloudName:this.props.cloudName,uploadPreset:this.props.uploadPreset},l.a.createElement(c.a,null,l.a.createElement(r.d,{className:"router"},l.a.createElement(r.b,{exact:!0,path:"/additem",component:F}),l.a.createElement(r.b,{exact:!0,path:"/additem/new",component:K}),l.a.createElement(r.a,{from:"/",to:"/additem"}))))}}var Q=Object(T.b)(null,{onPhotosFetched:e=>({type:"PHOTOS_FETCHED",photos:e})})(Y);const V=Object(S.b)({photos:w,uploadedPhotos:_}),Z=Object(S.c)(V),$=D,ee=k;var te=function(){const e=Object(n.useState)([]),t=Object(m.a)(e,2),a=(t[0],t[1]),o=Object(n.useState)({}),s=Object(m.a)(o,2),c=s[0],r=s[1];function u(){p().then(e=>a(e.data)).catch(e=>console.log(e))}function d(e){const t=e.target,a=t.name,n=t.value;r(Object(i.a)(Object(i.a)({},c),{},{[a]:n}))}return Object(n.useEffect)(()=>{u()},[]),l.a.createElement("section",{className:"addSection"},l.a.createElement(b,null,l.a.createElement(v,null,l.a.createElement(f,{size:"m12"},l.a.createElement("div",{className:"closetDiv"},l.a.createElement("h3",{id:"addclosetitem"},"Add Closet Item:"),l.a.createElement("form",{encType:"multipart/form-data"},l.a.createElement(x,{onChange:d,name:"clothingType",placeholder:"Clothing Type (required)"}),l.a.createElement(x,{onChange:d,name:"brand",placeholder:"Brand (optional)"}),l.a.createElement(x,{onChange:d,name:"ethical",placeholder:"Ethical? (required, yes or no)"}),l.a.createElement(x,{onChange:d,name:"source",placeholder:"Image link (required)"}),l.a.createElement(U,{disabled:!(c.clothingType&&c.source),onClick:function(e){e.preventDefault(),c.clothingType&&c.source&&g({clothingType:c.clothingType,brand:c.brand,colors:c.colors,ethical:c.ethical}).then(e=>u()).catch(e=>console.log(e))}},"Submit Item"),l.a.createElement(T.a,{store:Z},l.a.createElement(Q,{cloudName:$,uploadPreset:ee}))))))))};var ae=function(){return l.a.createElement(b,null,l.a.createElement(v,null,l.a.createElement(f,{size:"m12"},l.a.createElement("h2",null,"My Outfits"),l.a.createElement("br",null),l.a.createElement("h4",null,"In progress!"))))};a(260);var ne=function(){return l.a.createElement("div",{className:"aboutSection"},l.a.createElement(b,null,l.a.createElement(v,null,l.a.createElement(f,{size:"m12"},l.a.createElement("div",{className:"aboutDiv"},l.a.createElement("h3",null,"Shop Responsibly"),l.a.createElement("p",null,"Have you ever thought about who makes your clothes, how much they're paid, and what happens to all those extra clothes that don't sell in stores? "),l.a.createElement("br",null),l.a.createElement("p",null,"Find out more:"),l.a.createElement("p",null,"https://fashionchecker.org/"))))))};a(261),a(262);class le extends n.Component{constructor(){super(),this.state={username:"",password:"",confirmPassword:""},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}handleSubmit(e){console.log("sign-up handleSubmit, username: "),console.log(this.state.username),e.preventDefault(),d.a.post("/user/",{username:this.state.username,password:this.state.password}).then(e=>{console.log(e),e.data.errmsg?console.log("username already taken"):(console.log("successful signup"),this.setState({redirectTo:"/login"}))}).catch(e=>{console.log("signup error: "),console.log(e)})}render(){return l.a.createElement("div",{className:"SignupForm"},l.a.createElement("h4",null,"Sign up"),l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"}),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"}),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group "},l.a.createElement("div",{className:"col-7"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Sign up"))))}}var oe=le;function se(){let e=document.getElementById("login-div"),t=document.getElementById("signup-div");console.log("button clicked"),"none"===e.style.display?(e.style.display="block",t.style.display="none"):e.style.display="none"}function ce(){let e=document.getElementById("login-div"),t=document.getElementById("signup-div");console.log("button clicked"),"none"===t.style.display?(t.style.display="block",e.style.display="none"):t.style.display="none"}var re=function({children:e}){return l.a.createElement("main",null,l.a.createElement("div",{className:"mainContainer"},l.a.createElement(v,null,l.a.createElement(f,{size:"m12"},l.a.createElement("h1",{className:"center main-logo"},"armoire"),l.a.createElement("h4",{className:"center"},"Organize your wardrobe and add to it responsibly"),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement(v,null,l.a.createElement(f,{size:"m3 offset-m3 right-align"},l.a.createElement("button",{className:"btn orange lighten-3",onClick:se},l.a.createElement("span",{className:"login-signup"},"Log In"))),l.a.createElement(f,{size:"m3 left-align"},l.a.createElement("button",{className:"btn orange lighten-3",onClick:ce},l.a.createElement("span",{className:"login-signup"},"Sign Up")))),l.a.createElement(v,null,l.a.createElement(f,{size:"s6 offset-s3"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{id:"login-div",className:"login-signup-div"},e),l.a.createElement("div",{id:"signup-div",className:"login-signup-div"},l.a.createElement(oe,null)),l.a.createElement("div",{className:"empty-space"})))))};var ie=function(e){const t=Object(n.useState)({}),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.g)().id;return Object(n.useEffect)(()=>{h(c).then(e=>s(e.data)).catch(e=>console.log(e))},[]),l.a.createElement("section",{className:"mainSection"},l.a.createElement(b,null,l.a.createElement(v,null,l.a.createElement(f,{size:"m6"},l.a.createElement("div",{style:{padding:10}},l.a.createElement(N,{src:o.source}))),l.a.createElement(f,{size:"m6"},l.a.createElement("div",{style:{padding:10}},l.a.createElement("article",null,l.a.createElement("h5",null,"Clothing Type: ",o.clothingType),l.a.createElement("h5",null,"Brand: ",o.brand),l.a.createElement("h5",null,"Ethical? ",o.ethical)),l.a.createElement(P,{onClick:()=>function(e){E(e).catch(e=>console.log(e))}(o._id)}))))))};a(263);class me extends n.Component{constructor(){super(),this.logout=this.logout.bind(this)}logout(e){e.preventDefault(),console.log("logging out"),d.a.post("/user/logout").then(e=>{console.log(e.data),200===e.status&&this.props.updateUser({loggedIn:!1,username:null})}).catch(e=>{console.log("Logout error")})}render(){const e=this.props.loggedIn;return console.log("navbar render, props: "),console.log(this.props),l.a.createElement("nav",{className:"nav-extended blue lighten-5"},e?l.a.createElement("section",null,l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement(c.b,{to:"/"},l.a.createElement("span",{className:"brand-logo center"},"armoire")),l.a.createElement("ul",{id:"nav-mobile",className:"right"},l.a.createElement("li",null,l.a.createElement(c.b,{to:"/signup",className:"menu-text",onClick:this.logout},"Log Out")))),l.a.createElement("div",{className:"nav-content"},l.a.createElement("ul",{className:"tabs tabs-transparent"},l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/closet"},"My Closet")),l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/additem"},"Add Item")),l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/about"},"Shop Responsibly"))))):l.a.createElement("section",null,l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement(c.b,{to:"/"},l.a.createElement("span",{className:"brand-logo center"},"armoire")),l.a.createElement("ul",{id:"nav-mobile",className:"right"},l.a.createElement("li",null,l.a.createElement(c.b,{to:"/signup",className:"menu-text",onClick:this.logout},"Log Out")))),l.a.createElement("div",{className:"nav-content"},l.a.createElement("ul",{className:"tabs tabs-transparent"},l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/closet"},"My Closet")),l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/additem"},"Add Item")),l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/myoutfits"},"My Outfits")),l.a.createElement("li",{className:"tab"},l.a.createElement(c.b,{className:"menu-text",to:"/about"},"Shop Responsibly"))))))}}var ue=me;class de extends n.Component{constructor(){super(),this.state={username:"",password:"",redirectTo:null},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}handleSubmit(e){e.preventDefault(),console.log("handleSubmit"),d.a.post("/user/login",{username:this.state.username,password:this.state.password}).then(e=>{console.log("login response: "),console.log(e),200===e.status&&(this.props.updateUser({loggedIn:!0,username:e.data.username}),this.setState({redirectTo:"/"}))}).catch(e=>{console.log("login error: "),console.log(e)})}render(){return this.state.redirectTo?l.a.createElement(r.a,{to:{pathname:this.state.redirectTo}}):l.a.createElement("div",null,l.a.createElement("h4",null,"Login"),l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"}),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"}),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group "},l.a.createElement("div",{className:"col-7"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Login"))))}}var pe=de;class he extends n.Component{constructor(){super(),this.state={loggedIn:!0,username:null},this.getUser=this.getUser.bind(this),this.componentDidMount=this.componentDidMount.bind(this),this.updateUser=this.updateUser.bind(this)}componentDidMount(){this.getUser()}updateUser(e){this.setState(e)}getUser(){d.a.get("/user/").then(e=>{console.log("Get user response: "),console.log(e.data),e.data.user?(console.log("Get User: There is a user saved in the server session: "),this.setState({loggedIn:!0,username:e.data.user.username})):(console.log("Get user: no user"),this.setState({loggedIn:!1,username:null}))})}render(){return l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(r.b,{exact:!0,path:["/","/signup"],render:()=>l.a.createElement(re,null,l.a.createElement(pe,{updateUser:this.updateUser}))}),l.a.createElement("div",null,l.a.createElement(ue,null),l.a.createElement(r.b,{exact:!0,path:"/closet",component:C}),l.a.createElement(r.b,{exact:!0,path:"/closet/:id"},l.a.createElement(ie,null)),l.a.createElement(r.b,{exact:!0,path:"/additem"},l.a.createElement(te,null)),l.a.createElement(r.b,{exact:!0,path:"/myoutfits"},l.a.createElement(ae,null)),l.a.createElement(r.b,{exact:!0,path:"/about"},l.a.createElement(ne,null)))))}}var Ee=he;a(264);s.a.render(l.a.createElement(Ee,null),document.getElementById("root"))},72:function(e,t,a){}},[[107,1,2]]]);
//# sourceMappingURL=main.aaf2e640.chunk.js.map
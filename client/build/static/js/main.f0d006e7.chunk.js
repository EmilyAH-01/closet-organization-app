(this["webpackJsonpreact-closet-app"]=this["webpackJsonpreact-closet-app"]||[]).push([[0],{106:function(e,t,a){e.exports=a(260)},128:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),o=a(39),s=a.n(o),r=a(3),c=a(4),i=a(8),m=a(18),d=a(7),u=a.n(d),p=function(){return u.a.get("/api/closet")},h=function(e){return u.a.post("/api/closet",e)};function E({children:e}){return n.a.createElement("div",{className:"container"},e)}function g({children:e}){return n.a.createElement("div",{className:"row"},e)}function b({size:e,children:t}){return n.a.createElement("div",{className:"col "+e},t)}function f({src:e,children:t}){return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-image"},n.a.createElement("img",{src:e,alt:"clothing item"})),t)}function v({children:e}){return n.a.createElement("div",{className:"card-content"},e)}a(128);function y({props:e,children:t}){return n.a.createElement("a",Object.assign({className:"btn orange lighten-3 "},e),t)}var N=function(){const e=Object(l.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],s=Object(l.useState)({}),c=Object(m.a)(s,2);function i(){p().then(e=>o(e.data)).catch(e=>console.log(e))}return c[0],c[1],Object(l.useEffect)(()=>{i()},[]),n.a.createElement(E,null,n.a.createElement(g,null,n.a.createElement(b,{size:"m12"},n.a.createElement(y,null,"Add Item"),n.a.createElement(y,null,"Create Outfit"),n.a.createElement(y,null,"Sort"),n.a.createElement(y,null,"Filter"))),n.a.createElement(g,null,n.a.createElement(b,{size:"m12"},n.a.createElement(g,null,a.length?a.map(e=>n.a.createElement(b,{key:e._id,size:"s6 m3"},n.a.createElement(f,{src:e.source},n.a.createElement(v,null,n.a.createElement(r.b,{to:"/closet/"+e._id},n.a.createElement("strong",null,e.clothingType," by ",e.brand)))))):n.a.createElement("h3",null,"No Results to Display")))))};function P(e){return n.a.createElement("div",{className:"input-field"},n.a.createElement("input",e))}function O(e){return n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("textarea",Object.assign({className:"materialize-textarea"},e)))}function C(e){return n.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:10},className:"btn waves-effect waves-light",type:"submit",name:"action"}),e.children,n.a.createElement("i",{className:"material-icons right"},"send"))}var U=a(29),x=a(15);var w=(e=[],t)=>{switch(t.type){case"PHOTOS_FETCHED":return[...t.photos];case"PHOTOS_UPLOADED":return[...t.photos,...e];case"DELETE_UPLOADED_PHOTO":return e.filter(e=>e.public_id!==t.publicId);default:return[...e]}};var T=(e=[],t)=>{switch(t.type){case"UPDATE_UPLOADED_PHOTO":{let a=-1;const l=e.map((e,l)=>e.id===t.uploadedPhoto.id?(a=l,Object(i.a)(Object(i.a)({},e),t.uploadedPhoto)):e);return-1!==a?l:[t.uploadedPhoto,...e]}case"DELETE_UPLOADED_PHOTO":{const a=e.findIndex(e=>e.response.body.public_id===t.publicId);return[...e.slice(0,a),...e.slice(a+1)]}default:return[...e]}},S="emilyah",_="km0b5awm",D=a(6);const I=e=>({type:"PHOTOS_UPLOADED",photos:e});var k=a(2);const j=(e,t)=>{try{const a=k.Util.withSnakeCaseKeys(t);return k.Cloudinary.new().url(e,a)}catch(a){return console.error(a),null}};class L extends l.Component{constructor(e){super(e),this.state={showMore:!1}}render(){const e=Object(i.a)(Object(i.a)({},this.context),this.props),t=j(e.publicId,e);return n.a.createElement("div",{className:"photo"},this.props.context&&n.a.createElement("h2",null,this.props.context.custom.photo),n.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},n.a.createElement(D.b,{publicId:this.props.publicId,className:"thumbnail inline",width:"250",height:"300",crop:"fit",quality:"80"},n.a.createElement(D.c,{quality:"auto",fetchFormat:"auto"}))))}}L.contextType=D.a.contextType;var z=L;class A extends l.Component{render(){return n.a.createElement("div",{className:"photoList"},n.a.createElement("div",{className:"actions"},n.a.createElement("a",{className:"upload_link",onClick:this.uploadImageWithCloudinary.bind(this)},"Upload Image")),n.a.createElement("div",{className:"photos"},0===this.props.photos.length&&n.a.createElement("p",null,"No photos were added yet."),this.props.photos.map(e=>n.a.createElement("div",null,n.a.createElement(z,{key:e.public_id,publicId:e.public_id}),n.a.createElement("p",null,"https://res.cloudinary.com/emilyah/image/upload/"+e.public_id)))))}uploadImageWithCloudinary(){const e=Object(i.a)({tags:["myphotoalbum"]},this.context);var t,a;console.log(e),t=e,a=(e,t)=>{if(e)console.log(e);else{const e=t.event,a=t.info;"success"===e&&this.props.onPhotosUploaded([a])}},window.cloudinary.openUploadWidget(t,a)}}A.contextType=D.a.contextType;var F=Object(x.b)(e=>({photos:e.photos}),{onPhotosUploaded:I})(A),H=a(103),M=a(40),B=a.n(M),q=a(105);class R extends l.Component{render(){const e=this.props.uploadedPhoto,t=e.response,a=t&&t.body,l=Math.floor(e.progress.percent);return n.a.createElement("div",null,n.a.createElement("h3",null,e.fileName),a&&a.delete_token&&n.a.createElement("button",{className:"delete-image",onClick:this.deletePhoto.bind(this)},"Delete image"),n.a.createElement("div",{className:"status"},!t&&n.a.createElement("div",null,"Uploading... ",l,"%"),!t&&n.a.createElement("div",null,"In progress"),t&&n.a.createElement("div",{className:"status-code"},"Upload completed with status code ",t.status)),n.a.createElement("div",{className:"progress-bar"},n.a.createElement("div",{className:"progress",role:"progressbar",style:{width:l+"%"}})),a&&n.a.createElement("div",{className:"info"},n.a.createElement("table",null,n.a.createElement("tbody",null,Object.keys(a).map(e=>n.a.createElement("tr",{key:e},n.a.createElement("td",null,e),n.a.createElement("td",null,JSON.stringify(a[e]))))))))}deletePhoto(){B.a.post("https://api.cloudinary.com/v1_1/".concat(this.context.cloudName,"/delete_by_token")).set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").send({token:this.props.uploadedPhoto.response.body.delete_token}).then(this.onDeletePhoto.bind(this))}onDeletePhoto(){this.props.onDeleteUploadedPhoto(this.props.uploadedPhoto.response.body.public_id)}}R.contextType=D.a.contextType;var J=Object(x.b)(e=>e,{onDeleteUploadedPhoto:e=>({type:"DELETE_UPLOADED_PHOTO",publicId:e})})(R);class W extends l.Component{constructor(e,t){super(e,t),this.state={uploadedPhotos:[]},this.photoId=1}render(){return n.a.createElement("div",null,n.a.createElement(q.a,{id:"direct-upload-dropzone",disableClick:!0,multiple:!1,accept:"image/*",style:{position:"relative"},onDrop:this.onPhotoSelected.bind(this)},n.a.createElement("div",{id:"direct_upload"},n.a.createElement("h1",null,"New Photo"),n.a.createElement("h2",null,"Direct upload from the browser with React File Upload"),n.a.createElement("p",null,"You can also drag and drop an image file into the dashed area."),n.a.createElement("form",null,n.a.createElement("div",{className:"form_line"},n.a.createElement("label",{path:"title"},"Title:"),n.a.createElement("div",{className:"form_controls"},n.a.createElement("input",{type:"text",ref:e=>this.titleEl=e,className:"form-control",placeholder:"Title"}))),n.a.createElement("div",{className:"form_line"},n.a.createElement("label",null,"Image:"),n.a.createElement("div",{className:"form_controls"},n.a.createElement("div",{className:"upload_button_holder"},n.a.createElement("label",{className:"upload_button",htmlFor:"fileupload"},"Upload"),n.a.createElement("input",{type:"file",id:"fileupload",accept:"image/*",multiple:"multiple",ref:e=>this.fileInputEl=e,onChange:()=>this.onPhotoSelected(this.fileInputEl.files)}))))),n.a.createElement("h2",null,"Status")),this.props.uploadedPhotos.map((e,t)=>n.a.createElement(J,{key:t,uploadedPhoto:e}))),n.a.createElement(r.c,{className:"back_link",exact:!0,to:"/photos"},"Back to list"))}onPhotoSelected(e){const t="https://api.cloudinary.com/v1_1/".concat(this.context.cloudName,"/upload"),a=this.titleEl.value;var l,n=Object(H.a)(e);try{for(n.s();!(l=n.n()).done;){let e=l.value;const n=this.photoId++,o=e.name;B.a.post(t).field("upload_preset",this.context.uploadPreset).field("file",e).field("multiple",!0).field("tags",a?"myphotoalbum,".concat(a):"myphotoalbum").field("context",a?"photo=".concat(a):"").on("progress",t=>this.onPhotoUploadProgress(n,e.name,t)).end((e,t)=>{this.onPhotoUploaded(n,o,t)})}}catch(o){n.e(o)}finally{n.f()}}onPhotoUploadProgress(e,t,a){this.props.onUpdateUploadedPhoto({id:e,fileName:t,progress:a})}onPhotoUploaded(e,t,a){this.props.onUpdateUploadedPhoto({id:e,fileName:t,response:a}),this.props.onPhotosUploaded([a.body])}}W.contextType=D.a.contextType;var G=Object(x.b)(e=>e,{onUpdateUploadedPhoto:e=>({type:"UPDATE_UPLOADED_PHOTO",uploadedPhoto:e}),onPhotosUploaded:I})(W);class X extends l.Component{componentDidMount(){(e=>{const t={cloudName:e,format:"json",type:"list",version:Math.ceil((new Date).getTime()/1e3)},a=j("myphotoalbum",t);return fetch(a).then(e=>e.text()).then(e=>e?JSON.parse(e).resources:[])})(this.props.cloudName).then(this.props.onPhotosFetched)}render(){return n.a.createElement(D.a,{cloudName:this.props.cloudName,uploadPreset:this.props.uploadPreset},n.a.createElement(r.a,null,n.a.createElement(c.d,{className:"router"},n.a.createElement(c.b,{exact:!0,path:"/additem",component:F}),n.a.createElement(c.b,{exact:!0,path:"/additem/new",component:G}),n.a.createElement(c.a,{from:"/",to:"/additem"}))))}}var K=Object(x.b)(null,{onPhotosFetched:e=>({type:"PHOTOS_FETCHED",photos:e})})(X);const Y=Object(U.b)({photos:w,uploadedPhotos:T}),Q=Object(U.c)(Y),V=S,Z=_;var $=function(){const e=Object(l.useState)([]),t=Object(m.a)(e,2),a=(t[0],t[1]),o=Object(l.useState)({}),s=Object(m.a)(o,2),r=s[0],c=s[1];function d(){p().then(e=>a(e.data)).catch(e=>console.log(e))}function u(e){const t=e.target,a=t.name,l=t.value;c(Object(i.a)(Object(i.a)({},r),{},{[a]:l}))}return Object(l.useEffect)(()=>{d()},[]),n.a.createElement(E,null,n.a.createElement(g,null,n.a.createElement(b,{size:"m12"},n.a.createElement("h3",{id:"addclosetitem"},"Add Closet Item:"),n.a.createElement("form",{encType:"multipart/form-data"},n.a.createElement(P,{onChange:u,name:"clothingType",placeholder:"Clothing Type (required)"}),n.a.createElement(P,{onChange:u,name:"brand",placeholder:"Brand (optional)"}),n.a.createElement(O,{onChange:u,name:"colors",placeholder:"Colors (optional)"}),n.a.createElement(O,{onChange:u,name:"source",placeholder:"Image link (required)"}),n.a.createElement(x.a,{store:Q},n.a.createElement(K,{cloudName:V,uploadPreset:Z})),n.a.createElement(C,{disabled:!(r.clothingType&&r.source),onClick:function(e){e.preventDefault(),r.clothingType&&r.source&&h({clothingType:r.clothingType,brand:r.brand,colors:r.colors,source:r.source}).then(e=>d()).catch(e=>console.log(e))}},"Submit Item")))))};var ee=function(){return n.a.createElement(E,null,n.a.createElement(g,null,n.a.createElement(b,{size:"m12"},n.a.createElement("h2",null,"My Outfits"),n.a.createElement("br",null),n.a.createElement("h4",null,"In progress!"))))};var te=function(){return n.a.createElement(E,null,n.a.createElement(g,null,n.a.createElement(b,{size:"m12"},n.a.createElement("h2",null,"Shop Responsibly"),n.a.createElement("br",null),n.a.createElement("h4",null,"In progress!"))))};a(257);class ae extends l.Component{constructor(){super(),this.state={username:"",password:"",confirmPassword:""},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}handleSubmit(e){console.log("sign-up handleSubmit, username: "),console.log(this.state.username),e.preventDefault(),u.a.post("/user/",{username:this.state.username,password:this.state.password}).then(e=>{console.log(e),e.data.errmsg?console.log("username already taken"):(console.log("successful signup"),this.setState({redirectTo:"/login"}))}).catch(e=>{console.log("signup error: "),console.log(e)})}render(){return n.a.createElement("div",{className:"SignupForm"},n.a.createElement("h4",null,"Sign up"),n.a.createElement("form",{className:"form-horizontal"},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-1 col-ml-auto"},n.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),n.a.createElement("div",{className:"col-3 col-mr-auto"},n.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-1 col-ml-auto"},n.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),n.a.createElement("div",{className:"col-3 col-mr-auto"},n.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group "},n.a.createElement("div",{className:"col-7"}),n.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Sign up"))))}}var le=ae;function ne(){let e=document.getElementById("login-div"),t=document.getElementById("signup-div");console.log("button clicked"),"none"===e.style.display?(e.style.display="block",t.style.display="none"):e.style.display="none"}function oe(){let e=document.getElementById("login-div"),t=document.getElementById("signup-div");console.log("button clicked"),"none"===t.style.display?(t.style.display="block",e.style.display="none"):t.style.display="none"}var se=function({children:e}){return n.a.createElement("main",{className:"mainContainer"},n.a.createElement(g,null,n.a.createElement(b,{size:"m12"},n.a.createElement("h1",{className:"center main-logo"},"armoire"),n.a.createElement("h4",{className:"center"},"Organize your wardrobe and add to it responsibly"),n.a.createElement("br",null),n.a.createElement("br",null))),n.a.createElement(g,null,n.a.createElement(b,{size:"m3 offset-m3 right-align"},n.a.createElement("button",{className:"btn orange lighten-3",onClick:ne},n.a.createElement("span",{className:"login-signup"},"Log In"))),n.a.createElement(b,{size:"m3 left-align"},n.a.createElement("button",{className:"btn orange lighten-3",onClick:oe},n.a.createElement("span",{className:"login-signup"},"Sign Up")))),n.a.createElement(g,null,n.a.createElement(b,{size:"s6 offset-s3"},n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{id:"login-div",className:"login-signup-div"},e),n.a.createElement("div",{id:"signup-div",className:"login-signup-div"},n.a.createElement(le,null)),n.a.createElement("div",{className:"empty-space"}))))};a(258);class re extends l.Component{constructor(){super(),this.logout=this.logout.bind(this)}logout(e){e.preventDefault(),console.log("logging out"),u.a.post("/user/logout").then(e=>{console.log(e.data),200===e.status&&this.props.updateUser({loggedIn:!1,username:null})}).catch(e=>{console.log("Logout error")})}render(){this.props.loggedIn;return console.log("navbar render, props: "),console.log(this.props),n.a.createElement("nav",{className:"nav-extended blue lighten-5"},n.a.createElement("section",null,n.a.createElement("div",{className:"nav-wrapper"},n.a.createElement(r.b,{to:"/"},n.a.createElement("span",{className:"brand-logo center"},"armoire")),n.a.createElement("ul",{id:"nav-mobile",className:"right"},n.a.createElement("li",null,n.a.createElement(r.b,{to:"/signup",className:"menu-text",onClick:this.logout},"Log Out")))),n.a.createElement("div",{className:"nav-content"},n.a.createElement("ul",{className:"tabs tabs-transparent"},n.a.createElement("li",{className:"tab"},n.a.createElement(r.b,{className:"menu-text",to:"/closet"},"My Closet")),n.a.createElement("li",{className:"tab"},n.a.createElement(r.b,{className:"menu-text",to:"/additem"},"Add Item")),n.a.createElement("li",{className:"tab"},n.a.createElement(r.b,{className:"menu-text",to:"/myoutfits"},"My Outfits")),n.a.createElement("li",{className:"tab"},n.a.createElement(r.b,{className:"menu-text",to:"/about"},"Shop Responsibly"))))))}}var ce=re;class ie extends l.Component{constructor(){super(),this.state={username:"",password:"",redirectTo:null},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}handleSubmit(e){e.preventDefault(),console.log("handleSubmit"),u.a.post("/user/login",{username:this.state.username,password:this.state.password}).then(e=>{console.log("login response: "),console.log(e),200===e.status&&(this.props.updateUser({loggedIn:!0,username:e.data.username}),this.setState({redirectTo:"/"}))}).catch(e=>{console.log("login error: "),console.log(e)})}render(){return this.state.redirectTo?n.a.createElement(c.a,{to:{pathname:this.state.redirectTo}}):n.a.createElement("div",null,n.a.createElement("h4",null,"Login"),n.a.createElement("form",{className:"form-horizontal"},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-1 col-ml-auto"},n.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),n.a.createElement("div",{className:"col-3 col-mr-auto"},n.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"col-1 col-ml-auto"},n.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),n.a.createElement("div",{className:"col-3 col-mr-auto"},n.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group "},n.a.createElement("div",{className:"col-7"}),n.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Login"))))}}var me=ie;class de extends l.Component{constructor(){super(),this.state={loggedIn:!0,username:null},this.getUser=this.getUser.bind(this),this.componentDidMount=this.componentDidMount.bind(this),this.updateUser=this.updateUser.bind(this)}componentDidMount(){this.getUser()}updateUser(e){this.setState(e)}getUser(){u.a.get("/user/").then(e=>{console.log("Get user response: "),console.log(e.data),e.data.user?(console.log("Get User: There is a user saved in the server session: "),this.setState({loggedIn:!0,username:e.data.user.username})):(console.log("Get user: no user"),this.setState({loggedIn:!1,username:null}))})}render(){return n.a.createElement(r.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(c.b,{exact:!0,path:["/","/signup"],render:()=>n.a.createElement(se,null,n.a.createElement(me,{updateUser:this.updateUser}))}),n.a.createElement("div",null,n.a.createElement(ce,null),n.a.createElement(c.b,{exact:!0,path:"/closet",component:N}),n.a.createElement(c.b,{exact:!0,path:"/additem"},n.a.createElement($,null)),n.a.createElement(c.b,{exact:!0,path:"/myoutfits"},n.a.createElement(ee,null)),n.a.createElement(c.b,{exact:!0,path:"/about"},n.a.createElement(te,null)))))}}var ue=de;a(259);s.a.render(n.a.createElement(ue,null),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.f0d006e7.chunk.js.map